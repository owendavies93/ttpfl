#! /usr/bin/env perl

use Mojo::Base -strict;

use Encode qw(encode_utf8);
use JSON::XS;

my $json_file = $ARGV[0];
open my $fh, '<', $json_file or die "Failed to open $json_file: $!";

while (<$fh>) {
    my $json = decode_json($_);
    for my $key (@{$json->{rankings}}) {
        my $name = encode_utf8($key->{rowName});
        say join "\t", $name, $key->{points}, $key->{ranking};
    }
}
